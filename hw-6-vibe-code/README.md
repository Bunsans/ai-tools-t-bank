# 1. Добавляем тесты

В проект были добавлены комплексные юнит-тесты для проверки функциональности приложения управления больницей.

## Что было сделано

### Тестовое покрытие

Создан файл `python3-app/test_main.py` с **51 тестом**, покрывающим:

- **Все API эндпоинты**: GET и POST запросы для всех handlers
  - MainHandler (главная страница)
  - HospitalHandler (управление больницами)
  - DoctorHandler (управление врачами)
  - PatientHandler (управление пациентами)
  - DiagnosisHandler (управление диагнозами)
  - DoctorPatientHandler (связь врачей и пациентов)

- **Бизнес-логика и валидация**:
  - Проверка обязательных полей
  - Валидация значений (например, sex должен быть 'M' или 'F')
  - Проверка существования связанных сущностей
  - Обработка ошибок подключения к Redis

- **Граничные случаи (edge cases)**:
  - Пустые значения полей
  - Отсутствующие аргументы
  - Невалидные ID связанных сущностей
  - Инкремент autoID
  - Пропуски в ID при получении данных

- **Инициализация базы данных**:
  - Создание autoID ключей
  - Идемпотентность функции init_db

### Технологии

- **pytest** — фреймворк для тестирования
- **pytest-tornado** — плагин для тестирования Tornado приложений
- **fakeredis** — мокирование Redis (не требуется реальный Redis сервер)
- **unittest.mock** — для патчинга зависимостей

### Запуск тестов

```bash
cd python3-app

# С использованием uv
uv run pytest test_main.py -v

# Или через виртуальное окружение
.venv/bin/pytest test_main.py -v

# Запуск конкретного теста
pytest test_main.py::TestHospitalHandler::test_hospital_post_success -v
```

Все тесты изолированы и используют fake Redis, поэтому не требуют запущенного Redis сервера.

## Дополнительные улучшения

- Добавлена поддержка **uv** для управления зависимостями и версионирования проекта
- Создан `pyproject.toml` с конфигурацией проекта и зависимостями
- Добавлен `docker-compose.yml` для удобного запуска Redis
- Обновлена документация в `python3-app/README.md`


# 2. Добавляем стресстесты

В проект были добавлены стресстесты

[Как запустить стресстесты](stresstest_guide.md)
